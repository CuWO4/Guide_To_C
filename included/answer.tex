\chapter{部分较困难问题的解答} \label{部分较困难问题的解答}

    \section{第\ref{循环结构}节问题: } \label{平方和公式答案}
    \begin{enumerate}
        \item 不能.
        \item 因为当\texttt{n}为奇数时, 表达式\texttt{n / 2}因为是整型除以整型, 会发生舍去小数部分, 并不严格等于数学上的$\dfrac{n}{2}$, 从而导致结果错误.
        \item 应当先判断\texttt{n}的奇偶, 根据\texttt{n}的奇偶分别使用: \\
              \texttt{(n + 1) / 2 * n * (2 * n + 1)}~~~~(n为奇数) \\
              \texttt{n / 6 * (n + 1) * (2 * n + 1)}~~~~(n为偶数)
        \item 读者可是试着输入1200, 看看两种方法的输出各是多少. 可以看到第一种发生了意料之外的错误, 而第二种则输出了正确的答案. 这是因为中间的结果其实也是整型, 而在运算过程中产生的中间变量过大, 则可能发生溢出, 发生意料之外的错误. 例如第一种方法由左向右运算, 当计算完第二次乘号时, $1200 \times 1201 \times 2401$已经太大了, \texttt{int}无法支持发生了溢出, 此后再除以6, 也只能得到一个错误的结果. 而第二种方法则先除以了6, 使得中间变量的数值大大减小了, 没有发生溢出, 故输出了正确的结果.
    \end{enumerate}